DRIVER
  os.environ['SMA_TSO_COSMOS_ELEMAT'] = '1'
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.ste*' ], 'SAVE.ste', '' )
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.lcd*' ], 'SAVE.ste', '' )
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.lcm*' ], 'SAVE.ste', '' )
END_

FEM_INPUT
  ID_NAME = 121-302-23A_Gooseneck_mount_iter_7_topology-In_line_topology_1
  FILE = 121-302-23A Gooseneck mount iter 7 topology-In line topology.NOD
END_

*SET_DB,rint,130,1

GROUP_DEF
  ID_NAME = FROZEN_AREA_ELEMS_GRP_1
  TYPE=ELEM
  FORMAT=LIST
  LIST_BEGIN
41,42,43,44,46,99,100,110,111,112,113,114,115,116,117,118,119,140,148,193,253,254,257,309,
327,328,329,330,331,409,410,411,412,413,414,415,506,512,513,514,515,835,839,906,909,1015,1019,
1020,1021,1022,1023,1024,1025,1042,1057,1058,1060,1129,1131,1134,1136,1183,1185,1251,1252,
1253,1254,1255,1256,1257,1302,1303,1304,1305,1516,1517,1518,1519,1520,1521,1522,1558,1559,
1567,1789,1796,1797,1798,1799,1800,1816,1817,1818,1819,1820,1821,1960,1961,1963,1964,1965,
2051,2069,2070,2071,2072,2073,2074,2084,2132,2138,2165,2195,2299,2300,2301,2302,2303,2304,
2384,2423,2426,2443,2450,2456,2659,2671,2674,2688,2857,3049,3164,3207,3208,3209,3211,3212,
3213,3214,3420,3421,3422,3423,3424,3425,3446,3447,3448,3449,3463,3492,3519,3520,3521,3522,
3524,3531,3532,3533,3534,3535,3542,3543,3544,3545,3546,3547,3551,3552,3580,3581,3582,3583,
3584,3585,3587,3588,3595,3608,3611,3612,3641,3642,3643,3644,3659,3660,3661,3663,3707,3708,
3716,3717,3719,3720,3722,3723,3829,3862,3872,3874,3876,3877,3878,3879,3880,3995,4009,4010,
4011,4014,4015,4016,4017,4020,4021,4022,4035,4036,4037,4038,4040,4041,4042,4043,4044,4196,
4340,4341,4342,4343,4344,4345,4346,4525,4526,4527,4528,4529,4533,4538,4564,4565,4572,4573,
4574,4575,4576,4577,4578,4579,4686,4687,4688,4833,4834,4836,4837,4924,4945,4951,4990,5136,
5140,5142,5144,5146,5147,5179,5202,5303,5326,5350,5361,5385,5389,5390,5392,5406,5415,5433,
5490,5491,5503,5507,5508,5515,5518,5549,5552,5556,5633,5653,5683,5689,5711,5727,5776,5812,
5865,5867,5871,5875,5880,5881,5883,5884,5922,5945,6062,6071,6086,6175,6177,6263,6272,6339,
6340,6342,6345,6411,6422,6434,6440,6444,6446,6449,6453,6471,6472,6583,6591,6611,6727,6788,
6793,6799,6800,6801,6950,6951,7090,7092,7094,7096,7097,7098,7099,7172,7173,7176,7177,7178,
7179,7188,7194,7322,7327,7348,7357,7362,7363,7364,7365,7370,7373,7375,7379,7381,7388,7441,
7444,7480,7528,7543,7544,7546,7560,7564,7565,7566,7568,7570,7579,7585,7587,7664,7676,7704,
7737,7746,7761,7772,7775,7827,7838,7926,7929,8045,8047,8053,8054,8055,8101,8193,8195,8198,
8331,8436,8443,8444,8445,8448,8454,8457,8459,8494,8495,8496,8509,8516,8562,8668,8695,8734,
8735,8799,8803,8809,8822,8823,8843,8844,8849,8861,8934,9015,9053,9057,9098,9099,9101,9102,
9104,9105,9109,9116,9117,9119,9125,9135,9138,9143,9144,9146,9147,9234,9235,9248,9249,9254,
9257,9264,9279,9281,9284,9287,9289,9300,9301,9387,9478,9480,9485,9486,9491,9493,9545,9554,
9561,9618,9619,9625,9628,9629,9630,9632,9634,9635,9636,9642,9675,9677,9685,9695,9725,9729,
9808,9834,9843,9984,10075,10082,10161,10171,10262,10263,10264,10265,10275,10296,10301,10303,
10307,10308,10311,10312,10342,10347,10349,10350,10358,10430,10432,10433,10463,10465,10586,
10607,10612,10624,10626,10632,10633,10635,10638,10732,10740,10741,10742,10747,10757,10758,
10760,10761,10777,10782,10788,10797,10888,10889,10891,10892,10893,10910,10924,11031,11042,
11186,11276,11284,11361,11400,11519,11569,11573,11574,11575,11576,11577,11578,11579,11602,
11614,11655,11659,11680,11714,11759,11760,11762,11765,11766,11767,11768,11773,11776,11779,
11783,11784,11790,11793,11794,11795,11796,11797,11800,11801,11802,11804,11805,11820,11829,
11833,11838,11839,11931,11937,11947,11981,11982,11983,11990,11991,12005,12006,12007,12043,
12175,12179,12185,12282,12283,12332,12334,12335,12395,12407,12418,12422,12447,12469,12471,
12526,12530,12535,12540,12542,12547,12549,12644,12647,12648,12649,12652,12663,12671,12761,
12785,12787,12789,12790,12794,12847,12879,12888,12901,12907,12911,12915,12916,12917,12920,
13105,13109,13112,13113,13126,13127,13130,13131,13224,13542,13543,13544,13546,13548,13670,
13712,13714,13715,13716,13731,13861,13862,13866,13867,13869,13917,13918,13919,13920,13922,
13925,13927,13928,13929,13932,13934,13935,13938,13939,13944,13960,13979,13983,13994,13996,
13997,14018,14027,14031,14037,14133,14135,14138,14144,14145,14146,14149,14150,14248,14255,
14257,14259,14260,14264,14266,14267,14273,14282,14283,14284,14286,14505,14510,14512,14514,
14515,14520,14521,14522,14722,14724,14725,14727,14788,14790,14791,14795,14816,14818,14821,
14831,14860,14861,14862,14863,14864,14868,14918,14927,14984,14985,14989,14990,14997,14999,
15003,15007,15091,15098,15192,15194,15202,15203,15210,15211,15212,15217,15218,15220,15242,
15244,15249,15252,15426,15440,15443,15446,15472,15477,15547,15548,15549,15550,15552,15553,
15556,15561,15563,15593,15594,15596,15638,15644,15645,15646,15648,15650,15651,15654,15655,
15656,15658,15659,15742,15744,15745,15748,15749,15750,15751,15754,15779,15780,15785,15786,
15787,15789,15790,15848,15901,15925,15949,15965,16088,16173,16175,16186,16311,16312,16314,
16317,16318,16323,16368,16374,16388,16407,16409,16410,16412,16414,16458,16477,16480,16493,
16551,16554,16590,16591,16592,16596,16598,16599,16608,16775,16782,16989,16992,17073,17075,
17095,17100,17236,17237,17238,17239,17241,17242,17245,17247,17248,17270,17273,17318,17361,
17362,17363,17364,17368,17381,17423,17427,17429,17431,17438,17439,17447,17464,17473,17490,
17491,17500,17514,17579,17617,17621,17622,17627,17631,17632,17634,17635,17807,17824,17825,
17832,17843,17965,17975,17976,17979,18032,18058,18063,18064,18065,18087,18132,18262,18268,
18470,18482,18587,18637,18638,18640,18641,18644,18656,18659,18667,18691,18692,18693,18697,
18698,18701,18702,18703,18704,18746,18750,18796,18924,18927,18930,18936,19078,19091,19092,
19094,19097,19116,19117,19118,19165,19234,19235,19236,19250,19251,19252,19255,19256,19402,
19508,19513,19515,19516,19517,19552,19553,19589,19590,19597,19598,19619,19620,19648,19678,
19684,19732,19741,19742,19782,19783,19787,19792,19793,19798,19848,19960,19962,19982,20106,
20225,20230,20232,20297,20299,20300,20302,20303,20308,20311,20315,20316,20323,20500,20504,
20519,20521,20523,20525,20526,20585,20587,20588,20592,20594,20595,20598,20599,20600,20602,
20651,20653,20654,20655,20657,20663,20664,20665,20723,20726,20728,20829,20832,20878,20894,
20975,20980,20994,20999,21004,21016,21025,21030,21032,21040,21093,21198,21206,21208,21227,
21575,21576,21584,21585,21586,21605,21615,21616,21618,21619,21621,21622,21624,21626,21668,
21671,21859,21861,21863,21899,21901,21905,21909,21914,21921,21925,21931,21937,21948,21967,
21969,21970,22053,22069,22070,22140,22143,22281,22326,22328,22329,22330,22344,22345,22346,
22348,22350,22351,22381,22413,22416,22463,22470,22471,22475,22493,22494,22511,22512,22513,
22514,22515,22524,22528,22542,22597,22680,22691,22693,22696,22699,22700,22707,22722,22761,
22764,22767,22768,22769,22770,22771,22773,22820,22822,22823,22933,22936,22942,22944,22945,
22948,22953,22955,22956,22957,22958,22959,22960,22961,23107,23108,23109,23111,23113,23115,
23117,23163,23281,23295,23361,23392,23418,23419,23420,23421,23422,23423,23439,23441,23442,
23449,23660,23663,23666,23667,23733,23736,23737,23741,23742,23743,23851,23860,23980,23991,
23994,23995,24010,24039,24048,24049,24051,24081,24105,24116,24118,24119,24247,24252,24253,
24281,24284,24318,24321,24325,24364,24382,24389,24390,24514,24525,24540,24544,24567,24573,
24577,24612,24767,24810,24811,24813,24815,24816,24818,24822,24823,24826,24849,24850,24851,
24852,24853,24854,24855,24857,24864,24899,24940,24973,24977,24978,24979,25215,25222,25224,
25236,25237,25239,25241,25345,25366,25368,25370,25371,25374,25379,25418,25445,25452,25530,
25606,25685,25686,25687,25689,25692,25783,25824,25834,25836,26003,26004,26007,26036,26038,
26053,26056,26061,26062,26065,26076,26081,26154,26156,26164,26169,26170,26302,26461,26462,
26465,26477,26478,26480,26594,26595,26596,26604,26606,26639,26640,26641,26643,26645,26651,
26655,26658,26686,26687,26691,26693,26792,26796,26850,26852,26858,26860,26861,26926,26936,
26943,26954,26976,27018,27020,27021,27022,27023,27125,27139,27140,27141,27143,27192,27296,
27301,27308,27374,27383,27384,27413,27458,27459,27460,27461,27462,27527,27532,27533,27566,
27567,27568,27589,27590,27591,27592,27609,27756,27799,27808,27825,27826,27827,27838,27839,
27840,27846,27847,27854,27869,27870,27872,27874,27875,27877,27881,27884,27907,27909,27910,
27990,28002
END_

! ----------------------------------------------------------------
!
! Design Response: Stiffness_Measure
!
DRESP
  ID_NAME = Stiffness_Measure
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = ENERGY_STIFF_MEASURE
  GROUP_OPER = SUM
  LC_SEL = SUM 
  LC_SET = STATIC, ALL, ALL, MAX
END_

! ----------------------------------------------------------------
!
! Design Response: Mass_DResp_1
!
DRESP
  ID_NAME = Mass_DResp_1
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = WEIGHT
  GROUP_OPER = SUM
END_

! ----------------------------------------------------------------
!
! Design Response: Stress_DResp_1
!
DRESP
  ID_NAME = Stress_DResp_1
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = SIG_TOPO_MISES
  GROUP_OPER = MAX
  LC_SET = STATIC, 1, ALL, MAX
END_

! ----------------------------------------------------------------
!
!
! Design Area: Task1_DESIGN_AREA
!
DV_TOPO
  ID_NAME = Task1_DESIGN_AREA
  EL_GROUP = ALL_ELEMENTS
END_

! ----------------------------------------------------------------
!
! Objective Function: StiffnessEnergy_Obj_Func
!
OBJ_FUNC
  ID_NAME = StiffnessEnergy_Obj_Func
  DRESP = Stiffness_Measure, 1.0
  TARGET = MIN
END_

! ----------------------------------------------------------------
!
! Constraint: Mass_Constraint_1
!
CONSTRAINT
  ID_NAME = Mass_Constraint_1
  DRESP = Mass_DResp_1
  MAGNITUDE = REL
  LE_VALUE = 0.3
END_

! ----------------------------------------------------------------
!
! Constraint: Stress_Constraint_FOS_2
!
CONSTRAINT
  ID_NAME = Stress_Constraint_FOS_2
  DRESP = Stress_DResp_1
  MAGNITUDE = ABS
  LE_VALUE = 1.83333e+08
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Thickness_ManufacConstraint_3
!
DVCON_TOPO
  ID_NAME = Thickness_ManufacConstraint_3
  EL_GROUP = ALL_ELEMENTS
  CHECK_TYPE = MIN_MEMBER
  THICKNESS = 0.009525
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Frozen_ManufacConstraint_4
!
DVCON_TOPO
  ID_NAME = Frozen_ManufacConstraint_4
  EL_GROUP = FROZEN_AREA_ELEMS_GRP_1
  CHECK_TYPE = FROZEN
END_

! ----------------------------------------------------------------
!
! CS_DEF: Datum_CSys_6
!
CS_DEF
  ID_NAME = Datum_CSys_6
  CS_TYPE = RECTANGULAR
  DEF_TYPE = LOCAL
  CS_REF = CS_0
  ORIGIN_123 = -0.000000, -0.000000, 0.004763
  ROTATION_321 = 0.000000, -0.000000, 0.000000
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Symm_ManufacConstraint_5-1
!
LINK_TOPO
  ID_NAME = Symm_ManufacConstraint_5-1_LINK_
  TYPE = PLANE_SYM, AXIS_3
  CS = Datum_CSys_6 
  IGNORE_FROZEN = FALSE
END_

DVCON_TOPO
  ID_NAME = Symm_ManufacConstraint_5-1
  EL_GROUP = ALL_ELEMENTS
  CHECK_TYPE = LINK_TOPO
  CHECK_LINK = Symm_ManufacConstraint_5-1_LINK_
END_

! ----------------------------------------------------------------
!
!
! Optimize: OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_CONTROLLER 
!
OPTIMIZE
  ID_NAME = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY
  DV = Task1_DESIGN_AREA
  OBJ_FUNC = StiffnessEnergy_Obj_Func
  DVCON = Thickness_ManufacConstraint_3
  DVCON = Frozen_ManufacConstraint_4
  DVCON = Symm_ManufacConstraint_5-1
  CONSTRAINT = Mass_Constraint_1
  CONSTRAINT = Stress_Constraint_FOS_2
  STRATEGY = TOPO_SENSITIVITY
END_

OPT_PARAM
  ID_NAME = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY_OPT_PARAM_
  OPTIMIZE = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY
  DV_UPDATE_STRATEGY = CSA
  STABILIZATION = YES
  AUTO_FROZEN = BOTH
  AUTO_FROZEN_CON = BOTH
  STOP_CRITERION_LEVEL = BOTH
  STOP_CRITERION_OBJ = 0.001
  STOP_CRITERION_DENSITY = 0.005
END_

STOP
  ID_NAME = Task-1_GLOBAL_STOP_CONDITION_
  ITER_MAX = 75
END_

